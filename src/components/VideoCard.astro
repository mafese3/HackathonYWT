---
// Props: title, author, youtubeId
const { 
  title = 'Título', 
  author = 'Autor', 
  videoId = ''
} = Astro.props
---
<style>
  .swipe-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 80px; /* Deja espacio para el overlay de información */
    z-index: 5;
    cursor: grab;
    touch-action: none;
  }
  
  .swipe-overlay:active {
    cursor: grabbing;
  }
</style>

<article class="relative h-[calc(100vh-4rem)] w-full max-w-3xl mx-auto snap-start video-container">
  <div class="absolute inset-0 flex items-center justify-center bg-black">
    {videoId ? (
      <iframe 
        class="w-full h-full youtube-video"
        src={`https://www.youtube.com/embed/${videoId}?enablejsapi=1&autoplay=1&controls=1&loop=1&modestbranding=1&rel=0&showinfo=0&mute=1&playlist=${videoId}`}
        title={title} 
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
        allowfullscreen
      ></iframe>
    ) : (
      <div class="w-full h-full theme-block rounded flex items-center justify-center theme-text-secondary">Video</div>
    )}
  </div>
  
  {/* Capa para capturar gestos de deslizamiento */}
  <div class="swipe-overlay"></div>
  
  {/* Overlay con información */}
  <div class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent text-white" style="z-index: 6;">
    <h3 class="text-lg font-bold">{title}</h3>
    <div class="flex items-center gap-2 mt-2">
      <span class="material-symbols-outlined text-xl">person</span>
      <p class="text-sm">{author}</p>
    </div>
  </div>
</article>